<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMART SHOP - Trang Chủ</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="zoom.css">
</head>
<body>
    <div class="container">
        <div class="banner">
            <img id="doihinh" src="IMG/banner.webp" alt="" style="width: 100%;">
        </div>

<hr>

        <nav>
            <ul class="menu">
                <li><a href="http://127.0.0.1:5500/ps40305_HuynhVanTai_ASM/index.html">TRANG CHỦ</a></li>
                <li><a href="#">SẢN PHẨM</a></li>
                <li><a href="#">PHỤ KIỆN</a></li>
                <li><a href="#">KHUYẾN MÃI</a></li>
                <li><a href="http://127.0.0.1:5500/ps40305_HuynhVanTai_ASM/index.html">GIỎ HÀNG</a></li>
                <li><a href="http://127.0.0.1:5500/ps40305_HuynhVanTai_ASM/dangnhap.html">ĐĂNG NHẬP</a></li>
                <li><a href="http://127.0.0.1:5500/ps40305_HuynhVanTai_ASM/dangki.html">ĐĂNG KÍ</a></li>
            </ul>
        </nav>

<hr>

<div class="row">
    <div id="giohang">
     <table border="1" id="show_table"></table>
    </div>
</div>

        <div class="section">
            <div class="col25">
                <img src="IMG/ip.webp" alt="">
                <h3 msp="001">Iphone 15 Pro Max 256GB</h3>
                <h3 dongia="29890000">29.890.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
            </div>

            <div class="col25">
                <img src="IMG/ss.webp" alt="">
                <h3 msp="002">Samsung Galaxy S23 FE</h3>
                <h3 dongia="12890000">12.890.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
            </div>

            <div class="col25">
                <img src="IMG/xr.webp" alt="">
                <h3 msp="003">Xiaomi Redmi Note 13</h3>
                <h3 dongia="4590000">4.590.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
            </div>  

            <div class="col25">
                <img src="IMG/oppo.webp" alt="">
                <h3 msp="004">Oppo A18</h3>
                <h3 dongia="3690000">3.690.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
            </div>  

            <div class="col25">
                <img src="IMG/realmi.webp" alt="">
                <h3 msp="005">Realme C51</h3>
                <h3 dongia="4090000">4.090.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
            </div>  

            <div class="col25">
                <img src="IMG/samsung galaxy a05s.webp" alt="">
                <h3 msp="006">Samsung Galaxy A05s</h3>
                <h3 dongia="3690000">3.690.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
            </div>  

            <div class="col25">
                <img src="IMG/iphone 11.webp" alt="">
                <h3 msp="007">Iphone 11</h3>
                <h3 dongia="9990000">9.990.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
            </div>

            <div class="col25">
                <img src="IMG/oppo a18.webp" alt="">
                <h3 msp="008">Oppo A18</h3>
                <h3 dongia="4690000">4.690.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
            </div>

            <div class="col25">
                <img src="IMG/asus.webp" alt="">
                <h3 msp="009">Asus TUF Gaming</h3>
                <h3 dongia="17490000"> 17.490.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
            </div>

            <div class="col25">
                <img src="IMG/msi.webp" alt="">
                <h3 msp="010">MSI Gaming Thin</h3>
                <h3 dongia="20190000">20.190.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
            </div>  

            <div class="col25">
                <img src="IMG/acer.webp" alt="">
                <h3 msp="011">Acer Gaming Aspire 5</h3>
                <h3 dongia="17990000">17.990.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
            </div>  

            <div class="col25">
                <img src="IMG/hp.webp" alt="">
                <h3 msp="012">HP 14s-em0086AU R5</h3>
                <h3 dongia="13290000">13.290.000 đ</h3>
                <input id="fm_number" type="number">
                <button onclick="muangay(this)">mua ngay</button>
                </form>
            </div>
            
        </div>
    </div>
 
    <footer>
        <img style="margin-left: 65px;" src="IMG/ft2.webp">
        <img style="width: 1300px; margin-left: 30px;" src="IMG/footer.jpg">
    </footer>
    <script src="js/main.js"></script>
    
    <script>
        var giohang = new Array();
function muangay(x){
    var cha = x.parentElement; // Trả về cha
    var hinh = cha.children[0].src; 
    var tensp = cha.children[1].getAttribute('msp');
    var dongia = cha.children[2].getAttribute('dongia')*1;
    var soluong = cha.children[3].value*1;
    var thanhtien = dongia*soluong;
    // add vào mảng item trước khi đưa vào giỏ hàng
    var item = new Array(hinh,tensp,dongia,soluong,thanhtien);
    // add vào mảng giỏ hàng các item-----------
    if(giohang.length==0){
        giohang.push(item);
    }
    else
        {
            for (var i = 0; i < giohang.length; i++){
                if  (giohang[i][1]==tensp){
                    alert('Trùng mã Sản phảm tăng số lượng..')
                    giohang[i][3] += soluong // tính lại số lượng 
                    giohang[i][4] = giohang[i][2]*giohang[i][3]; // tính số lượng 
                    break;
                }}
                    if (i==giohang.length) {
                        giohang.push(item);
                        alert('Bạn vừa thêm sản phẩm mới');
                    }
    }
    console.log(giohang);
        view_table();
}    
    function view_table(){
        var tongtien=0; 
        var kq =
        ` <tr>
            <th>STT</th>
            <th>Hình</th>
            <th>Mã Sản Phẩm</th>
            <th>Số Lượng</th>
            <th>Đơn Giá</th>
            <th>Thành Tiền</th>
            <th>Xóa</th>
        </tr>`
        //show các dòng sản phẩm tra table .....
        for(let i = 0; i<giohang.length; i++){
            let stt =i+1;
            tongtien += giohang[i][4];

       
        kq +=
            `<tr>
                <td>${stt}</td>
                <td><img src="${giohang[i][0]}" alt=""></td>
                <td>${giohang[i][1]}</td>
                <td>${giohang[i][2]}</td>
                <td>${giohang[i][3]}</td>
                <td>${giohang[i][4]}</td>
                <td><button onclick="xoa(this,${i})">Xóa</button></td>
            </tr>`
        }
        kq +=
            `<tr>
                <td colspan="4">Tổng thành tiền</td>
                <td colspan="2">${tongtien}</td>
                <td colspan="1"><button>Mua Ngay</button></td>
            </tr>`
        document.getElementById('show_table').innerHTML = kq;
    }
    
    function xoa(node,vtr){
        console.log(node.parentElement.parentElement)
        node.parentElement.parentElement.remove();
        giohang.splice(node,1);
        view_table();
    }
    </script>

    
</body>
</html>